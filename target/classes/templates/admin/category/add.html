<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{admin/fragments/head :: head}">
	 <meta charset="UTF-8"/>
</head>
<body class="hold-transition skin-blue sidebar-mini">
	<!-- Site wrapper -->
	<div class="wrapper">

		<header th:replace="~{admin/fragments/header :: header}"></header>
		<!-- =============================================== -->

		<!-- Left side column. contains the sidebar -->
		<aside th:replace="~{admin/fragments/sidebar :: sidebar}"></aside>
		<!-- =============================================== -->

		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<section class="content-header">
				<ol class="breadcrumb">
					<li><a href="/admin"><i class="fa fa-dashboard"></i>Trang chủ</a></li>
					<li><a href="/admin/category">Danh sách danh mục</a></li>
					<li class="active">Thêm mới danh mục</li>
				</ol>
			</section>

			<!-- Main content -->
			<section class="content">
				<div class="box box-primary" bis_skin_checked="1">
					<div class="cf-title-06">
						<h3>
							Thêm mới danh mục
						</h3>
					</div>

					<form role="form" method="post" th:action="@{/admin/add-category}" th:object="${category}">
						<div class="box-body">
							<div class="form-group" >
								<label for="exampleInputEmail1">Category Name</label>
								<input type="text" class="form-control" onkeyup="ChangeToSlug()" id="categoryName"
									   th:field="*{name}" placeholder="Enter Category Name"/>
							</div>
							<div class="form-group" >
								<label for="exampleInputEmail1">Category Slug</label>
								<input type="text" class="form-control" id="categorySlug"
									   th:field="*{slug}" placeholder="Enter Category Slug"/>
							</div>
							<div class="form-group" bis_skin_checked="1">
								<label for="exampleInputEmail1">Category Status</label>
								<div class="form-check" bis_skin_checked="1">
									<input class="form-check-input" type="radio" 
										   th:field="*{status}" value="1" checked/>
									<label class="form-check-label" for="flexRadioDefault1">
										<span class="badge badge-success">Enabled</span>
									</label>
								</div>
								<div class="form-check" bis_skin_checked="1">
									<input class="form-check-input" type="radio" 
										   th:field="*{status}" value="0"/>
									<label class="form-check-label" for="flexRadioDefault2">
										<span class="badge badge-danger">Disabled</span>
									</label>
								</div>
							</div>
						</div>

						<div class="box-footer" bis_skin_checked="1">
							<button type="submit" class="btn btn-primary">Save Category</button>
						</div>
					</form>
				</div>
			</section>
			<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->

		<footer th:replace="~{admin/fragments/footer :: footer}"></footer>

	</div>
	<!-- ./wrapper -->

	<!-- jQuery 3 -->
	<div th:replace="~{admin/fragments/scripts :: scripts}"></div>

	<script type="text/javascript">
		function ChangeToSlug() {

            var slug;

            //Lấy text từ thẻ input title
            slug = document.getElementById("categoryName").value;
            slug = slug.toLowerCase();
            //Đổi ký tự có dấu thành không dấu
            slug = slug.replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi, 'a');
            slug = slug.replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi, 'e');
            slug = slug.replace(/i|í|ì|ỉ|ĩ|ị/gi, 'i');
            slug = slug.replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi, 'o');
            slug = slug.replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi, 'u');
            slug = slug.replace(/ý|ỳ|ỷ|ỹ|ỵ/gi, 'y');
            slug = slug.replace(/đ/gi, 'd');
            //Xóa các ký tự đặt biệt
            slug = slug.replace(/\`|\~|\!|\@|\#|\||\$|\%|\^|\&|\*|\(|\)|\+|\=|\,|\.|\/|\?|\>|\<|\'|\"|\:|\;|_/gi, '');
            //Đổi khoảng trắng thành ký tự gạch ngang
            slug = slug.replace(/ /gi, "-");
            //Đổi nhiều ký tự gạch ngang liên tiếp thành 1 ký tự gạch ngang
            //Phòng trường hợp người nhập vào quá nhiều ký tự trắng
            slug = slug.replace(/\-\-\-\-\-/gi, '-');
            slug = slug.replace(/\-\-\-\-/gi, '-');
            slug = slug.replace(/\-\-\-/gi, '-');
            slug = slug.replace(/\-\-/gi, '-');
            //Xóa các ký tự gạch ngang ở đầu và cuối
            slug = '@' + slug + '@';
            slug = slug.replace(/\@\-|\-\@|\@/gi, '');
            //In slug ra textbox có id “slug”
            document.getElementById('categorySlug').value = slug;
        }
	</script>

</body>
</html>
