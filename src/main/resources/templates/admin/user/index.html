<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{admin/fragments/head :: head}">
<meta charset="UTF-8">
</head>
<body class="hold-transition skin-blue sidebar-mini">
	<!-- Site wrapper -->
	<div class="wrapper">

		<header th:replace="~{admin/fragments/header :: header}"></header>
		<!-- =============================================== -->

		<!-- Left side column. contains the sidebar -->
		<aside th:replace="~{admin/fragments/sidebar :: sidebar}"></aside>
		<!-- =============================================== -->

		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<section class="content-header">
				<ol class="breadcrumb">
                    <li><a href="/admin"><i class="fa fa-dashboard"></i>Trang chủ</a></li>
                    <li class="active">Danh sách tài khoản</li>
				</ol>
			</section>

			<!-- Main content -->
			<section class="content">
				<div class="box-body" bis_skin_checked="1">
                        <div class="row" bis_skin_checked="1">
                            <div class="col-xs-12" bis_skin_checked="1">
                                <div class="box" bis_skin_checked="1">
                                    <div class="box-header" bis_skin_checked="1">
                                        <h3 class="box-title">Danh sách tài khoản</h3>
                                        <div class="box-tools" bis_skin_checked="1">
                                            <div class="input-group input-group-sm hidden-xs" style="width: 150px;" bis_skin_checked="1">
                                                <input type="text" name="table_search" class="form-control pull-right" placeholder="Search" data-listener-added_ea58ad00="true">
                                                <div class="input-group-btn" bis_skin_checked="1">
                                                    <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="box-body table-responsive no-padding" bis_skin_checked="1">
                                        <table class="table table-hover">
                                            <tbody><tr>
                                                <th>ID</th>
                                                <th>Username</th>
                                                <th>FullName</th>
                                                <th>Gender</th>
                                                <th>BirthDay</th>
                                                <th>Address</th>
                                                <th>Phone</th>
                                                <th>Email</th>
                                                <th>Role</th>
                                                <th>Status</th>
                                                <th>Action</th>
                                            </tr>
                                            <tr th:each="user : ${users}">
                                                <td th:text="${user.id}"></td>
                                                <td th:text="${user.username}"></td>
                                                <td th:text="${user.firstname}+' '+${user.lastname}"></td>
                                                <td th:if="${user.gender}">Nam</td>
                                                <td th:if="${!user.gender}">Nữ</td>
                                                <td th:text="${user.birthday}"></td>
                                                <td th:text="${user.address}"></td>
                                                <td th:text="${user.phone}"></td>
                                                <td th:text="${user.email}"></td>
                                                <td>
                                                    <span th:each="role : ${user.roles}" class="label bg-navy" th:text="${role.name}"></span>
                                                </td>
                                                <td th:if="${user.status}"><span class="label label-success">Enabled</span></td>
                                                <td th:if="${!user.status}"><span class="label label-danger">Disabled</span></td>
                                                <td><a class="pr-1 btn btn-success btn-sm rounded-0"
                                                       th:href="@{/admin/edit-user/{id}(id=${user.id})}"><i
                                                        class="fa fa-edit"></i></a> <a
                                                        class="pr-1 btn btn-danger btn-sm rounded-0"
                                                        th:href="@{/admin/delete-user/{id}(id=${user.id})}"
                                                        onclick="return confirm('Are you sure?')"><i
                                                        class="fa fa-trash"></i></a>
                                                </td>
                                            </tr>
                                            </tbody></table>
                                    </div>

                                </div>

                            </div>
                        </div>
					</div>

			</section>
			<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->

		<footer th:replace="~{admin/fragments/footer :: footer}"></footer>

	</div>
	<!-- ./wrapper -->

	<!-- jQuery 3 -->
	<div th:replace="~{admin/fragments/scripts :: scripts}"></div>
	<script>
		function searchCategories() {
		    var keyword = document.getElementById("searchInput").value;
			fetch('/admin/category/search/' + keyword)
				.then(response => response.json())
				.then(data => {
					var results = document.getElementById("results");
					results.innerHTML = '';
					data.forEach(category => {
						var li = document.createElement("li");
						li.textContent = category.name;
						results.appendChild(li);
					});
				})
				.catch(error => console.error('Lá»—i:', error));
		}
	</script>

	<script>
		document.getElementById('previousButton').addEventListener('click', function(event) {
            if (this.classList.contains('disabled')) {
                event.preventDefault(); // Ngăn người dùng điều hướng khi nút bị vô hiệu hóa
            }
        });
		document.getElementById('nextButton').addEventListener('click', function(event) {
            if (this.classList.contains('disabled')) {
                event.preventDefault(); // Ngăn người dùng điều hướng khi nút bị vô hiệu hóa
            }
        });
	</script>

	<script>
		// Lấy các checkbox và phần tử "Chọn tất cả" từ DOM
        const checkAll = document.getElementById('checkAll');
        const checkboxes = document.querySelectorAll('.checkbox-item');

        // Bắt đầu theo dõi sự kiện khi checkbox "Chọn tất cả" được thay đổi
        checkAll.addEventListener('change', function () {
            checkboxes.forEach(function (checkbox) {
                checkbox.checked = checkAll.checked;
            });
        });

        // Bắt đầu theo dõi sự kiện khi các checkbox con được thay đổi
        checkboxes.forEach(function (checkbox) {
            checkbox.addEventListener('change', function () {
                // Kiểm tra xem tất cả checkbox con có được chọn hay không
                const allChecked = Array.from(checkboxes).every(function (item) {
                    return item.checked;
                });

                // Cập nhật trạng thái của checkbox "Chọn tất cả"
                checkAll.checked = allChecked;
            });
        });
	</script>
</body>
</html>
